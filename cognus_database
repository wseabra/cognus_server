CREATE TABLE User
(
	user_id bigint(20) primary key auto_increment NOT NULL,
	user_name VARCHAR(30) DEFAULT NULL,
	user_email VARCHAR(30) DEFAULT NULL,
	user_senha VARCHAR(30) DEFAULT NULL,
	user_numseguidores bigint(20) DEFAULT NULL
);

CREATE TABLE Seguidores
(
	id bigint(20) NOT NULL,
	seguindo_user_id bigint(20) NOT NULL,
	seguidor_user_id bigint(20) NOT NULL,
	FOREIGN KEY(seguindo_user_id) REFERENCES Usuario(user_id),
	FOREIGN KEY(seguidor_user_id) REFERENCES Usuario(user_id)
);

CREATE TABLE Pergunta
(
	perg_id bigint(20) primary key auto_increment,
	user_id bigint(20) NOT NULL,
	texto_perg VARCHAR(1000) NOT NULL,
	descricao VARCHAR(1000),
	FOREIGN KEY(user_id) REFERENCES User(user_id)
);

CREATE TABLE Resposta
(
	user_id bigint(20) NOT NULL,
	resp_id bigint(20) primary key auto_increment,
	texto_resp   VARCHAR(1000) NOT NULL,
	num_votos_positivos INT,
	num_votos_negativos INT,
	FOREIGN KEY(user_id) REFERENCES Usuario(user_id)
);

CREATE TABLE Topico
(
	topico_id int primary key auto_increment,
	descricao_topico VARCHAR(100) NOT NULL,
	num_seguidores INT NOT NULL
);

CREATE TABLE TopicoUser
(
	user_id INT NOT NULL,
	topico_id INT NOT NULL,
	PRIMARY KEY(user_id,topico_id),
	FOREIGN KEY(user_id) REFERENCES Usuario(user_id),
	FOREIGN KEY(topico_id) REFERENCES Topico(topico_id)
);

CREATE TABLE PerguntaResposta
(
	perg_id INT NOT NULL,
	resp_id INT NOT NULL,
	PRIMARY KEY(perg_id,resp_id),
	FOREIGN KEY(perg_id) REFERENCES Pergunta(perg_id),
	FOREIGN KEY(resp_id) REFERENCES Resposta(resp_id)
);

CREATE TABLE TopicoPergunta
(
	topico_id int not null,
	perg_id int not  null,
	primary key(topico_id, perg_id),
	foreign key(topico_id) references Topico(topico_id),
	foreign key(perg_id) references Pergunta(perg_id)
);
